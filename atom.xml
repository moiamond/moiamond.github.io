<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>moiamond&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://moiamond.github.io/"/>
  <updated>2016-07-14T15:55:54.000Z</updated>
  <id>http://moiamond.github.io/</id>
  
  <author>
    <name>moiamond</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vagrant 1.8.4 跟 Virtualbox 5.1 水土不合</title>
    <link href="http://moiamond.github.io/post/2016-07-14-Vagrant-1-8-4-%E8%B7%9F-Virtualbox-5-1-%E6%B0%B4%E5%9C%9F%E4%B8%8D%E5%90%88/"/>
    <id>http://moiamond.github.io/post/2016-07-14-Vagrant-1-8-4-跟-Virtualbox-5-1-水土不合/</id>
    <published>2016-07-14T15:20:06.000Z</published>
    <updated>2016-07-14T15:55:54.000Z</updated>
    
    <content type="html">&lt;p&gt;跟上頭反應了好久，老闆終於丟了一台空機器給我當測試機。馬上先安裝 Ubuntu trusty LTS 作業系統，並且裝了最新版的 &lt;code&gt;Virtualbox 5.1&lt;/code&gt; 和 &lt;code&gt;vagrant 1.8.4&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;結果執行 &lt;code&gt;vagrant up&lt;/code&gt; 時，噴出一堆錯誤：&lt;br&gt;&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;If you believe you already have a provider available, make sure &lt;span class=&quot;keyword&quot;&gt;it&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; properly installed &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; configured. You can see more details &lt;span class=&quot;keyword&quot;&gt;about&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;why a particular provider &lt;span class=&quot;keyword&quot;&gt;isn&#39;t&lt;/span&gt; working &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; forcing usage &lt;span class=&quot;keyword&quot;&gt;with&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;`vagrant up &lt;span class=&quot;comment&quot;&gt;--provider=PROVIDER`, which should give you a more specific&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;error&lt;/span&gt; message &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;that&lt;/span&gt; particular provider.&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;真是看到鬼了，照著錯誤訊息加了 &lt;code&gt;--provider=virtualbox&lt;/code&gt; 還是看到一樣的錯誤訊息。&lt;/p&gt;
&lt;p&gt;不得已只好打開 &lt;code&gt;debug&lt;/code&gt; 的 log，看看有沒有有用的資訊&lt;br&gt;&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;VAGRANT_LOG&lt;/span&gt;=debug vagrant up --provider=virtualbox&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在眾多的訊息中，終於發現關鍵的資訊，原來&lt;code&gt;1.8.4&lt;/code&gt;只支援到&lt;code&gt;5.0&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Vagrant has detected &lt;span class=&quot;keyword&quot;&gt;that&lt;/span&gt; you have a &lt;span class=&quot;built_in&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; VirtualBox installed&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;that&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; supported &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; this &lt;span class=&quot;built_in&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; Vagrant. Please install one &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;the&lt;/span&gt; supported versions listed &lt;span class=&quot;keyword&quot;&gt;below&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; use Vagrant:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4.0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4.1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4.2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4.3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5.0&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;後來去爬了&lt;code&gt;vagrant&lt;/code&gt;的 &lt;a href=&quot;https://github.com/mitchellh/vagrant/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;issues&lt;/a&gt;，此問題 &lt;a href=&quot;https://github.com/mitchellh/vagrant/issues/7411&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;#7411&lt;/a&gt; 已經有不少討論了。&lt;br&gt;也剛好有人&lt;a href=&quot;https://github.com/mitchellh/vagrant/pull/7574/files&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PR&lt;/a&gt;了解法。這個問題預計會修在&lt;code&gt;1.8.5&lt;/code&gt;，不過也不知道什麼時候才會出。我又不想裝回舊的&lt;code&gt;virtualbox&lt;/code&gt;。索性照著此&lt;a href=&quot;https://github.com/mitchellh/vagrant/pull/7574/files&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PR&lt;/a&gt;的改法，修改&lt;code&gt;vagrant&lt;/code&gt;資料夾下的檔案。&lt;/p&gt;
&lt;p&gt;問題就順利解決了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;跟上頭反應了好久，老闆終於丟了一台空機器給我當測試機。馬上先安裝 Ubuntu trusty LTS 作業系統，並且裝了最新版的 &lt;code&gt;Virtualbox 5.1&lt;/code&gt; 和 &lt;code&gt;vagrant 1.8.4&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;結果執行 &lt;c
    
    </summary>
    
    
      <category term="vagrant" scheme="http://moiamond.github.io/tags/vagrant/"/>
    
      <category term="virtualbox" scheme="http://moiamond.github.io/tags/virtualbox/"/>
    
  </entry>
  
  <entry>
    <title>使用 Docker 快速架設 RTMP 串流平台</title>
    <link href="http://moiamond.github.io/post/2016-07-04-%E4%BD%BF%E7%94%A8-Docker-%E5%BF%AB%E9%80%9F%E6%9E%B6%E8%A8%AD-RTMP-%E4%B8%B2%E6%B5%81%E5%B9%B3%E5%8F%B0/"/>
    <id>http://moiamond.github.io/post/2016-07-04-使用-Docker-快速架設-RTMP-串流平台/</id>
    <published>2016-07-04T07:04:12.000Z</published>
    <updated>2016-07-04T14:58:14.000Z</updated>
    
    <content type="html">&lt;p&gt;為了在開發機器上測試&lt;strong&gt;RTMP&lt;/strong&gt;串流，研究了一下目前可行的方案，最後選定用Nginx+RTMP module+Docker來方便的達到此需求。&lt;/p&gt;
&lt;p&gt;過程大概就是下面四個步驟:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安裝所有能編譯&lt;strong&gt;Nginx&lt;/strong&gt;的相關套件&lt;/li&gt;
&lt;li&gt;到&lt;strong&gt;Nginx&lt;/strong&gt;的官網抓取最新的原始碼&lt;/li&gt;
&lt;li&gt;Git clone 最新的 &lt;a href=&quot;https://github.com/arut/nginx-rtmp-module.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;nginx-rtmp-module&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;開始編譯&lt;strong&gt;nginx&lt;/strong&gt;原始碼 (要打開打開&lt;strong&gt;nginx-rtmp-module&lt;/strong&gt;編譯選項)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;為了之後可以很方便的無腦啟動，因此整理成了&lt;code&gt;Dockerfile&lt;/code&gt;，詳細的步驟可以&lt;a href=&quot;https://github.com/moiamond/dockerfiles/tree/master/nginx-rtmp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在此&lt;/a&gt;找到&lt;/p&gt;
&lt;p&gt;只要執行&lt;br&gt;&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;./build.&lt;span class=&quot;keyword&quot;&gt;sh&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;就會啟動一個名為&lt;code&gt;streamserver&lt;/code&gt;﹑支援RTMP協定的伺服器&lt;/p&gt;
&lt;p&gt;查看RTMP的統計資料&lt;br&gt;&lt;figure class=&quot;highlight dts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//docker:8800/stat&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;串流位址&lt;br&gt;&lt;figure class=&quot;highlight dts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;rtmp:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//docker:1935/live/mystream&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;為了在開發機器上測試&lt;strong&gt;RTMP&lt;/strong&gt;串流，研究了一下目前可行的方案，最後選定用Nginx+RTMP module+Docker來方便的達到此需求。&lt;/p&gt;
&lt;p&gt;過程大概就是下面四個步驟:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安裝所有能編譯&lt;strong&gt;N
    
    </summary>
    
    
      <category term="docker" scheme="http://moiamond.github.io/tags/docker/"/>
    
      <category term="streaming" scheme="http://moiamond.github.io/tags/streaming/"/>
    
  </entry>
  
  <entry>
    <title>解決 Plex Media Server 讀不到 Aperture 的問題</title>
    <link href="http://moiamond.github.io/post/2014-08-03-jie-jue-plex-media-server-du-bu-dao-aperture-de-wen-ti/"/>
    <id>http://moiamond.github.io/post/2014-08-03-jie-jue-plex-media-server-du-bu-dao-aperture-de-wen-ti/</id>
    <published>2014-08-03T15:02:25.000Z</published>
    <updated>2016-07-04T14:58:14.000Z</updated>
    
    <content type="html">&lt;img src=&quot;/post/2014-08-03-jie-jue-plex-media-server-du-bu-dao-aperture-de-wen-ti/title.png&quot; alt=&quot;[Plex Channels]&quot; title=&quot;[Plex Channels]&quot;&gt;
&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;使用 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 一陣子了，主要是拿來當家裡的影音中心。&lt;br&gt;因為我使用 &lt;strong&gt;Aperture&lt;/strong&gt; 來管理所有的照片，因此 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 透過 &lt;strong&gt;Aperture&lt;/strong&gt; 來分享照片。&lt;/p&gt;
&lt;p&gt;但是常常會發生 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 讀不到 &lt;strong&gt;Aperture&lt;/strong&gt; 的情形。&lt;br&gt;使用上就非常的不方便，常常要重新開啟 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 讓一切正常。&lt;br&gt;後來發現只要我在 &lt;strong&gt;Aperture&lt;/strong&gt; 裡面做一些操作之後，&lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 就讀不到 &lt;strong&gt;Aperture&lt;/strong&gt; 了。&lt;/p&gt;
&lt;p&gt;原來 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 是透過 Aperture Library XML (ApertureData.xml) 來讀取 &lt;strong&gt;Aperture&lt;/strong&gt; 的資料。&lt;br&gt;只要這個檔案有改變，&lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 就讀不到了。&lt;/p&gt;
&lt;p&gt;爬了一下網路的文章，滿多人都有遇到這個問題，解決方法不外乎就是重開 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; XD&lt;br&gt;既然沒有好的解決方法，只好就此症狀對症下藥了。&lt;/p&gt;
&lt;p&gt;想法非常的簡單，就是自動偵測 ApertureData.xml 有沒有更新，如果有就重新開啟 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;在 Mac OS 下，其實可以透過內建的 &lt;strong&gt;launchd&lt;/strong&gt; 做到這些事。&lt;/p&gt;
&lt;h2 id=&quot;進入正題&quot;&gt;&lt;a href=&quot;#進入正題&quot; class=&quot;headerlink&quot; title=&quot;進入正題&quot;&gt;&lt;/a&gt;進入正題&lt;/h2&gt;&lt;p&gt;這邊我分成兩個部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果 ApertureData.xml 有更新則砍掉 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 這隻程式&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 要一直保持啟動。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;lauchd&lt;/code&gt; 會載入存放在 &lt;code&gt;~/Library/LaunchAgents/&lt;/code&gt; 的 &lt;code&gt;plist&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;接下來詳細的說明各個 &lt;code&gt;plist&lt;/code&gt; 的內容：&lt;/p&gt;
&lt;h3 id=&quot;監控-ApertureData-xml&quot;&gt;&lt;a href=&quot;#監控-ApertureData-xml&quot; class=&quot;headerlink&quot; title=&quot;監控 ApertureData.xml&quot;&gt;&lt;/a&gt;監控 &lt;code&gt;ApertureData.xml&lt;/code&gt;&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;如果 ApertureData.xml 有更新，就執行會砍掉 Plex Media Server 這隻程式的 script&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;新增 &lt;code&gt;com.plex.killme.plist&lt;/code&gt; 內容如下：&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;php&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?&lt;/span&gt;xml version=&lt;span class=&quot;string&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;!DOCTYPE plist PUBLIC -//Apple Computer//DTD PLIST 1.0//EN&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;http://www.apple.com/DTDs/PropertyList-1.0.dtd&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;plist&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;version&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;Label&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;com.plex.killme&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;ProgramArguments&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;         &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;/Users/userA/script/kill-plex&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;restart&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;         &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;WatchPaths&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;/Users/userA/Pictures/Aperture Library.aplibrary/ApertureData.xml&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;plist&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;新增 kill-plex.sh 內容如下：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sleep 60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;killall &lt;span class=&quot;string&quot;&gt;&quot;Plex Media Server”&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;當所監控的檔案有更新的時候，&lt;code&gt;launchd&lt;/code&gt; 就會去執行 &lt;code&gt;kill-plex.sh&lt;/code&gt;。&lt;br&gt;&lt;code&gt;kill-plex.sh&lt;/code&gt; 一開始會先等待60秒之後再砍掉 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt;。&lt;br&gt;為什麼要先等待60秒？其實這是實驗結果導向。&lt;br&gt;因為 &lt;code&gt;launchd&lt;/code&gt; 會一直保持 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 在執行的狀態，&lt;br&gt;只要一發現 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 沒有在執行，就會馬上重新啟動它。&lt;br&gt;如果在 ApertureData.xml 正在更新的當下，馬上砍掉 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 再重新啟動，&lt;br&gt;常常也會發生看不到 &lt;strong&gt;Aperture&lt;/strong&gt; 的情況。&lt;br&gt;因此就先等60秒，看起來一切就正常了。&lt;/p&gt;
&lt;h3 id=&quot;Keep-alive&quot;&gt;&lt;a href=&quot;#Keep-alive&quot; class=&quot;headerlink&quot; title=&quot;Keep alive&quot;&gt;&lt;/a&gt;Keep alive&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 要一直保持啟動&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;新增 &lt;code&gt;com.plex.keepalive.plist&lt;/code&gt; 內容如下：&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;php&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?&lt;/span&gt;xml version=&lt;span class=&quot;string&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;plist&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;version&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;Label&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;com.plex.keepalive&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;Program&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;/Applications/Plex Media Server.app/Contents/MacOS/Plex Media Server&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;KeepAlive&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;true&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;plist&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;準備就緒&quot;&gt;&lt;a href=&quot;#準備就緒&quot; class=&quot;headerlink&quot; title=&quot;準備就緒&quot;&gt;&lt;/a&gt;準備就緒&lt;/h3&gt;&lt;p&gt;當新增這兩個 &lt;code&gt;plist&lt;/code&gt; 到 &lt;code&gt;~/Library/LaunchAgents/&lt;/code&gt; 裡，如何馬上啟用？&lt;br&gt;可以執行以下的指令：&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;launchctl load ~/Library/LaunchAgents/com&lt;span class=&quot;selector-class&quot;&gt;.plex&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.killme&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.plist&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;launchctl load ~/Library/LaunchAgents/com&lt;span class=&quot;selector-class&quot;&gt;.plex&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.keepalive&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.plist&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;以後不管 &lt;strong&gt;Aperture&lt;/strong&gt; 做了什麼操作，我不用再手動重新啟動 &lt;a href=&quot;https://plex.tv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Plex Media Server&lt;/a&gt; 了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;img src=&quot;/post/2014-08-03-jie-jue-plex-media-server-du-bu-dao-aperture-de-wen-ti/title.png&quot; alt=&quot;[Plex Channels]&quot; title=&quot;[Plex Channels]&quot;&gt;

    
    </summary>
    
      <category term="雜七雜八" scheme="http://moiamond.github.io/categories/%E9%9B%9C%E4%B8%83%E9%9B%9C%E5%85%AB/"/>
    
    
      <category term="plex" scheme="http://moiamond.github.io/tags/plex/"/>
    
      <category term="aperture" scheme="http://moiamond.github.io/tags/aperture/"/>
    
  </entry>
  
  <entry>
    <title>Doxygen 初體驗</title>
    <link href="http://moiamond.github.io/post/2008-04-26-Doxygen-%E5%88%9D%E9%AB%94%E9%A9%97/"/>
    <id>http://moiamond.github.io/post/2008-04-26-Doxygen-初體驗/</id>
    <published>2008-04-26T13:38:52.000Z</published>
    <updated>2016-07-04T14:58:14.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;http://www.stack.nl/~dimitri/doxygen/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Doxygen&lt;/a&gt;是產生程式碼說明文件的工具，支援的語言也非常多。使用的方式也很簡單，在 Windows 系統下首先安裝它的&lt;a href=&quot;http://ftp.stack.nl/pub/users/dimitri/doxygen-1.5.5-setup.exe&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;工具程式&lt;/a&gt;。&lt;br&gt;接下來最重要的部份則是，你要如何告訴 doxygen 一些規則，好讓它能夠自動幫你產生文件。&lt;/p&gt;
&lt;p&gt;以下是 &lt;a href=&quot;http://www.stack.nl/~dimitri/doxygen/docblocks.html#pythonblocks&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;doxygen 說明文件的一個範例 &lt;/a&gt;:&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## @package pyexample&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#  Documentation for this module.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#  More details.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## Documentation for a function.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#  More details.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;pass&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## Documentation for a class.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#  More details.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PyClass&lt;/span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;## The constructor.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        self._memVar = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;## Documentation for a method.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#  @param self The object pointer.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PyMethod&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;pass&lt;/span&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;## A class variable.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    classVar = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;## @var _memVar&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#  a member variable&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最後再用&lt;a href=&quot;http://www.stack.nl/~dimitri/doxygen/doxywizard_usage.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Doxywizard&lt;/a&gt;就可以很簡單的產生說明文件了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://www.stack.nl/~dimitri/doxygen/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Doxygen&lt;/a&gt;是產生程式碼說明文件的工具，支援的語言也非常多。使用的方式也很簡單，在 W
    
    </summary>
    
      <category term="programming" scheme="http://moiamond.github.io/categories/programming/"/>
    
    
      <category term="doxygen" scheme="http://moiamond.github.io/tags/doxygen/"/>
    
      <category term="python" scheme="http://moiamond.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>在 Linux 上寫你的 Daemon</title>
    <link href="http://moiamond.github.io/post/2002-02-22-%E5%9C%A8-Linux-%E4%B8%8A%E5%AF%AB%E4%BD%A0%E7%9A%84-Daemon/"/>
    <id>http://moiamond.github.io/post/2002-02-22-在-Linux-上寫你的-Daemon/</id>
    <published>2002-02-21T16:53:08.000Z</published>
    <updated>2016-07-04T14:58:14.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Linux-deamon&quot;&gt;&lt;a href=&quot;#Linux-deamon&quot; class=&quot;headerlink&quot; title=&quot;Linux deamon&quot;&gt;&lt;/a&gt;Linux deamon&lt;/h2&gt;&lt;p&gt;最近研究了一下如何寫&lt;code&gt;Linux&lt;/code&gt;的&lt;code&gt;daemon&lt;/code&gt;(相當於&lt;code&gt;Windows&lt;/code&gt;的 service)。首先找到了&lt;a href=&quot;http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Linux Daemon Writing HOWTO&lt;/a&gt;。這篇文章寫的相當的清楚，基本上只要依照以下的原則就可以寫出基本的骨架。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;呼叫 &lt;code&gt;Fork()&lt;/code&gt; 並且讓父程序結束&lt;/li&gt;
&lt;li&gt;改變&lt;code&gt;umask&lt;/code&gt;為&lt;code&gt;0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;建立log&lt;/li&gt;
&lt;li&gt;呼叫&lt;code&gt;setsid()&lt;/code&gt;建立一個新的作業階段&lt;/li&gt;
&lt;li&gt;改變目前的&lt;code&gt;工作路徑&lt;/code&gt;到一個安全的地方，也就是說永遠都會存在的路徑。例如&lt;code&gt;根目錄&lt;/code&gt;就是一個很好的選擇&lt;/li&gt;
&lt;li&gt;關閉沒有必要的&lt;code&gt;檔案描述詞&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;你這隻 daemon 所要做的事&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;另外要寫&lt;code&gt;daemon&lt;/code&gt;有一點一定要注意，那就是盡可能使用防禦式的寫法來寫程式碼。因為&lt;code&gt;daemon&lt;/code&gt;不像一般的程式，如果當掉了，是很難去追原因的。所以錯誤檢查要做好，並且一定要養成輸出&lt;code&gt;log&lt;/code&gt;的習慣。&lt;/p&gt;
&lt;h2 id=&quot;用-Python-來實作&quot;&gt;&lt;a href=&quot;#用-Python-來實作&quot; class=&quot;headerlink&quot; title=&quot;用 Python 來實作&quot;&gt;&lt;/a&gt;用 Python 來實作&lt;/h2&gt;&lt;p&gt;如果你會寫&lt;code&gt;Python&lt;/code&gt;，那麼也許你可以參考&lt;a href=&quot;http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;A simple unix/linux daemon in Python&lt;/a&gt;的作法。如果你仔細看一下他的程式碼，你會發現他的 &lt;em&gt;Daemon&lt;/em&gt; 這個 &lt;em&gt;class&lt;/em&gt; 也是依照上面的原則寫出來的。&lt;/p&gt;
&lt;p&gt;有了一個&lt;code&gt;daemon&lt;/code&gt;骨架之後，接下來就看有什麼需求。譬如，如果想監控某個目錄下，檔案的新增，刪減或修改，可以搭配 &lt;a href=&quot;http://www.ibm.com/developerworks/linux/library/l-ubuntu-inotify/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;inotify&lt;/a&gt;。Python 也有相對應的模組 &lt;a href=&quot;http://pyinotify.sourceforge.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;pyinotify&lt;/a&gt;並將所監控的訊息紀錄在一個檔案。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Linux-deamon&quot;&gt;&lt;a href=&quot;#Linux-deamon&quot; class=&quot;headerlink&quot; title=&quot;Linux deamon&quot;&gt;&lt;/a&gt;Linux deamon&lt;/h2&gt;&lt;p&gt;最近研究了一下如何寫&lt;code&gt;Linux&lt;/code&gt;的&lt;
    
    </summary>
    
      <category term="programming" scheme="http://moiamond.github.io/categories/programming/"/>
    
    
      <category term="deamon" scheme="http://moiamond.github.io/tags/deamon/"/>
    
  </entry>
  
</feed>
